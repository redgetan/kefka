#!/usr/bin/env ruby

$LOAD_PATH.unshift("#{File.expand_path(File.dirname(__FILE__))}/../lib")

require 'kefka'

if ARGV.count < 1
  puts "Usage: kefka [path_to_file]"
  exit
end

path = ARGV[0]
file = File.open(path)

tracer = Kefka::Tracer.new
tracer.trace(file, :callgraph_handler)
ap tracer.method_table
puts tracer.instance_variable_get(:@class)
puts tracer.instance_variable_get(:@end)

